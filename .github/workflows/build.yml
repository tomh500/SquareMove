name: Kawaii Build

on:
  push:
    paths:
      # ä¿®æ­£åçš„è·¯å¾„åˆ—è¡¨ (ä½¿ç”¨æ–°ç›®å½•ç»“æ„)
      - '**/*.gitaction'
      - 'src/**/*.cpp'
      - 'src/**/*.h'
      - '**/*.vcxproj'
      - '**/*.rc' 
  pull_request:
    paths:
      - '**/*.gitaction'
      - 'src/**/*.cpp'
      - 'src/**/*.h'
      - '**/*.vcxproj'
      - '**/*.rc'

jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: 32768æ¬¡å¿ƒè·³åªä¸ºè§ä½ ä¸€é¢ğŸ’“
        uses: actions/checkout@v4

      - name: å½“æˆ‘é»˜æ•°å®Œåä¸ªæ•°å­—æ—¶ä½ ä¼šå‡ºç°åœ¨æˆ‘é¢å‰ğŸ”¢
        uses: microsoft/setup-msbuild@v2

      - name: å³ä½¿ä½ å·²ç»ç¦»å¼€æˆ‘ï¼Œæˆ‘ä¹Ÿä¼šç»§ç»­ä¸ºä½ ç¼–è¯‘ä»£ç ğŸ’”
        # åœ¨è¿™é‡Œè¿è¡Œ msbuildï¼Œå®ƒå°†åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ç”Ÿæˆ x64\Release æ–‡ä»¶å¤¹
        run: |
          msbuild FreeMove_Square.vcxproj /p:Configuration=Release /p:Platform=x64 /m

      - name: å°±è®©æˆ‘ä»¬çš„æ•…äº‹æ°¸è¿œç•™åœ¨è¿™ä¸ªç¼–è¯‘çš„ç¬é—´å§ğŸ“¦
        uses: actions/upload-artifact@v4
        with:
          name: FreeMove_Square-Build
          # æ ¸å¿ƒä¿®æ­£ï¼šè·¯å¾„åº”ä¸º MSBuild é»˜è®¤çš„è¾“å‡ºç›®å½•ï¼Œé€šå¸¸æ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ x64/Release/
          path: x64/Release/